# Star Wars y Picsum

## ğŸ“œ DescripciÃ³n

Este proyecto es una aplicaciÃ³n web desarrollada en **PHP** con **SQLite** que permite gestionar una base de datos de naves espaciales. Proporciona funcionalidades para listar, agregar, editar y eliminar naves mediante un sistema basado en rutas y controladores.
Aparte tambiÃ©n descarga un csv de picsum

## ğŸ›  TecnologÃ­as Utilizadas

- **PHP** (sin framework, arquitectura MVC simple)
- **SQLite** (base de datos ligera)
- **Composer** (gestiÃ³n de dependencias)
- **Dotenv** (manejo de variables de entorno)

## ğŸ“‚ Estructura del Proyecto

```
ACTUASOLUTIONS
â”‚â”€â”€ database
â”‚   â”‚â”€â”€ schema.sql        # Esquema de la base de datos
â”‚   â”‚â”€â”€ starships.db      # Base de datos SQLite
â”‚â”€â”€ includes
â”‚   â”‚â”€â”€ controllers
â”‚   â”‚   â”‚â”€â”€ ShipController.php  # Controlador de naves
â”‚   â”‚   â”‚â”€â”€ PicsumController.php  # Controlador de Picsum
â”‚   â”‚â”€â”€ core
â”‚   â”‚   â”‚â”€â”€ Router.php         # Sistema de rutas
â”‚   â”‚â”€â”€ models
â”‚   â”‚   â”‚â”€â”€ Ship.php           # Modelo de nave
â”‚   â”‚   â”‚â”€â”€ ShipRepository.php # Repositorio de datos
â”‚   â”‚   â”‚â”€â”€ PicsumDownloader.php # Modelo para descargar imÃ¡genes de Picsum
â”‚   â”‚â”€â”€ views
â”‚   â”‚   â”‚â”€â”€ layouts
â”‚   â”‚   â”‚â”€â”€ ships
â”‚   â”‚   â”‚â”€â”€ picsum
â”‚   â”‚â”€â”€ db.php                 # ConexiÃ³n con la base de datos
â”‚â”€â”€ public
â”‚   â”‚â”€â”€ index.php              # Punto de entrada de la app
â”‚   â”‚â”€â”€ setup.php              # Script de configuraciÃ³n inicial
â”‚â”€â”€ scripts
â”‚   â”‚â”€â”€ import_csv.php         # Importador de datos desde CSV
â”‚â”€â”€ vendor                     # Dependencias de Composer
â”‚â”€â”€ .env                        # Variables de entorno
â”‚â”€â”€ .gitignore                  # Archivos ignorados en Git
â”‚â”€â”€ composer.json               # ConfiguraciÃ³n de Composer
â”‚â”€â”€ migrations.php              # Script de migraciones
â”‚â”€â”€ naves.csv                   # Archivo de datos CSV
```

## âš™ï¸ InstalaciÃ³n y ConfiguraciÃ³n

1. **Clonar el repositorio:**
   ```sh
   git clone https://github.com/tuusuario/proyecto-naves.git
   cd proyecto-naves
   ```
2. **Instalar dependencias:**
   ```sh
   composer install
   ```
3. **Configurar variables de entorno:**
   Crear un archivo `.env` en la raÃ­z del proyecto con el siguiente contenido:
   ```ini
   DB_PATH=database/starships.db
   ```
4. **Configurar la base de datos:**

Hay dos opciones desde la web o siguiendo los siguientes pasos:

   Ejecutar el siguiente comando para crear la base de datos y cargar el esquema:
   ```sh
   php migrations.php
   ```
5. **Importar datos desde CSV:**
   ```sh
   php scripts/import_csv.php
   ```

## Uso

Acceder a la aplicaciÃ³n desde el navegador:
   ```
   http://localhost:9999
   ```

### ğŸ“Œ Endpoints principales:
- `GET /ships` â†’ Listar naves
- `GET /ships/show/{id}` â†’ Mostrar detalles de una nave
- `GET /ships/edit/{id}` â†’ Editar una nave
- `POST /ships/store` â†’ Guardar una nueva nave
- `POST /ships/update/{id}` â†’ Actualizar una nave
- `POST /ships/delete/{id}` â†’ Eliminar una nave
- `GET /picsum` â†’ PÃ¡gina de descarga de imÃ¡genes de Picsum
- `POST /picsum/download` â†’ Descargar imÃ¡genes de Picsum en formato CSV

## ğŸ—„ï¸ Estructura de la Base de Datos

El esquema de la base de datos se define en el archivo `schema.sql`. Las tablas principales son:
- **manufacturers**: Almacena los fabricantes de las naves.
- **starship_classes**: Almacena las clases de las naves.
- **starships**: Almacena la informaciÃ³n bÃ¡sica de las naves.
- **starship_specs**: Almacena las especificaciones tÃ©cnicas de las naves.
- **starship_api_metadata**: Almacena los metadatos de la API de las naves.

## ğŸ›ï¸ Controladores

- **ShipController**: Maneja las solicitudes relacionadas con las naves espaciales.
- **PicsumController**: Maneja las solicitudes relacionadas con la descarga de imÃ¡genes de Picsum.

## ğŸ—ï¸ Modelos

- **Ship**: Representa una nave espacial.
- **ShipRepository**: Maneja la interacciÃ³n con la base de datos para las naves espaciales.
- **PicsumDownloader**: Descarga y convierte datos de imÃ¡genes de Picsum a CSV.

## ğŸ–¥ï¸ Vistas

Las vistas se encuentran en el directorio `views` y estÃ¡n organizadas en subdirectorios segÃºn su funcionalidad:

- **layouts**: Contiene las plantillas comunes como `header.php` y `footer.php`.
- **ships**: Contiene las vistas relacionadas con las naves espaciales.
- **picsum**: Contiene las vistas relacionadas con la descarga de imÃ¡genes de Picsum.

## ğŸ›¤ï¸ Rutas

Las rutas se definen en el archivo `Router.php` y se registran en el archivo `index.php`.

## ğŸ“œ Scripts

- **import_csv.php**: Importa datos de naves desde un archivo CSV a la base de datos.
- **migrations.php**: Crea la base de datos y carga el esquema inicial.

